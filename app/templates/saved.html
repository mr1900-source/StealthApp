{% extends "base.html" %}
{% set active_page = "saved" %}

{% block content %}
    <div class="text-center mb-5">
        <h1 class="display-5 fw-bold">
            <i class="bi bi-bookmark-fill text-primary me-2"></i>Saved Itineraries
        </h1>
        <p class="lead text-muted">Your collection of travel plans</p>
    </div>

    {% if itineraries %}
        <div class="itinerary-grid">
            {% for item in itineraries %}
            <div class="itinerary-card">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <h5 class="mb-0">
                        <i class="bi bi-pin-map-fill text-primary me-2"></i>
                        {{ item.title }}
                    </h5>
                    <span class="badge bg-primary">{{ item.id }}</span>
                </div>
                
                <div class="meta mb-3">
                    <i class="bi bi-calendar3 me-1"></i>
                    Created: {{ item.created_at[:10] }}
                </div>
                
                <div class="mb-3">
                    <p class="text-muted small mb-1"><strong>Original Request:</strong></p>
                    <p class="small">
                        {{ item.prompt[:200] }}{% if item.prompt|length > 200 %}...{% endif %}
                    </p>
                </div>
                
                <div class="actions">
                    <a href="{{ url_for('main.view', itinerary_id=item.id) }}" class="btn btn-primary btn-sm flex-fill">
                        <i class="bi bi-eye-fill me-1"></i> View
                    </a>
                    
                    <form action="{{ url_for('main.regenerate', itinerary_id=item.id) }}" method="post" class="d-inline flex-fill">
                        <button type="submit" class="btn btn-outline-secondary btn-sm w-100">
                            <i class="bi bi-arrow-clockwise me-1"></i> Regenerate
                        </button>
                    </form>
                    
                    <form action="{{ url_for('main.delete', itinerary_id=item.id) }}" method="post" class="d-inline">
                        <button type="submit" class="btn btn-outline-danger btn-sm">
                            <i class="bi bi-trash-fill"></i>
                        </button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <i class="bi bi-inbox"></i>
            <h3>No Saved Itineraries Yet</h3>
            <p class="text-muted mb-4">Start planning your next adventure!</p>
            <a href="{{ url_for('main.index') }}" class="btn btn-primary">
                <i class="bi bi-plus-circle me-2"></i> Create Your First Itinerary
            </a>
        </div>
    {% endif %}

{% endblock %}